#!../k
/ https://codegolf.stackexchange.com/questions/263837/reverse-engineer-colors-for-a-layout/263928#263928
f:{(,^x)(,/{@[y;z;:;]'(((x=1+/y=)')#y@-1 1+z;,1+|/y)1=x@:z}[x]')/<x}
\l 0.k

f:(),-1+f@

t[1 2 1;(0 0 1;0 1 1)]
t[2 1 3 2 1;(0 0 0 1 1;0 0 1 1 1)]
t[1 2 1 2 1;(0 0 1 1 2;0 0 1 2 2;0 1 1 2 2)]
t[1 6;()]
t[4 2 3 1;()]
t[,1;,,0]
t[1 2 3 4;,0 0 0 0]
t[4 3 1 2;,0 0 0 0]
t[3 1 2 4;,0 0 0 0]
t[1 2 1 3;,0 1 1 1]
t[1 2 3 1;,0 0 0 1]
t[1 2 2 1;,0 0 1 1]

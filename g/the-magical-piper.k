/https://codegolf.stackexchange.com/questions/199026/the-magical-piper/199028#199028
f:{$[|//^r:2#',/0N 2#/:2^"o~"?"P"\x^"_";`error;+/r]}
\l 0.k
t["__o~P_o~~o";1 2]
t["__o_~o_P";`error]

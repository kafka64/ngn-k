/https://codegolf.stackexchange.com/questions/204694/analyze-the-flow/204705#204705
f:{l,'@[&#y;c;+;1][h]-l:#'c h:*'?c:{x@<x:(x?a@*|x)_x}'{?x,a x}'/a::x/x!'(+(,/-:\|:\!2)y)+!x}
\l 0.k
T[(5 5;"rdlu"?"urdrurllruuuulrududllurdu");(6 5;2 10;2 0)]

#!/usr/bin/env k
(a;O;d;t;f):+{(`I$", "\*|": "\x 1;{."{[old]",x,"}"}6_*|": "\x 2),(.*|" "\)'3#3_x}'0N 7#0:"i/11"
/(items;operation;divBy;throwIfTrue;throwIfFalse)
M:{w:m!O[x]'v x;v[x]:!0;#v[(f x;t x)@~d[x]!w],:w} /monkey x inspects available items
g:{v::a;*/r@2#>r:+/{M'!#v}'!x} /product of top2 after x rounds
m:-3;g 20     /part1
m:*/d;g 10000 /part2
